<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aether Guild | Global Atlas & Research Archive</title>
    
    <!-- Core Libraries (Load these first, without defer) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="L.Terminator.js"></script>
    
    <!-- Aetheric Interface Design System -->
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="auth.css" />
    
    <!-- Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="dark-theme"> 

    <div class="app-container">
        <!-- Unified Sidebar -->
        <aside class="sidebar">
            <div style="text-align: center; padding-bottom: 16px; border-bottom: 1px solid var(--theme-border-color);">
                <h1 class="card-title" style="font-size: 24px;">Aether Guild</h1>
                <p class="text-secondary" style="font-size: 14px;">Global Atlas & Archive</p>
            </div>

            <div class="card">
                <div class="card-header"><h2 class="card-title">View</h2></div>
                <div class="card-body">
                    <button id="view-switch-atlas" class="btn btn-primary" style="width:100%">Atlas</button>
                    <button id="view-switch-wiki" class="btn btn-secondary mt-1" style="width:100%">Aetherpedia</button>
                </div>
            </div>

            <div id="auth-section" class="card"></div>
            <div id="add-report-section" class="card" style="display:none;"></div>

            <div class="card">
                <div class="card-header"><h2 class="card-title">Settings</h2></div>
                <div class="card-body">
                    <button id="theme-switcher" class="btn btn-secondary" style="width: 100%;">Switch Theme</button>
                </div>
            </div>
        </aside>

        <!-- Main View Area -->
        <main class="main-view">
            <header class="main-header">
                <div class="search-container">
                    <i data-feather="search" class="search-icon"></i>
                    <input type="search" id="search-input" placeholder="Search Aetherpedia & Wikipedia..." autocomplete="off">
                    <div id="search-results-container" style="display: none;"></div>
                </div>
            </header>

            <div class="content-area">
                <div id="map-container"></div>
                <div id="wiki-container" class="hidden">
                    <div id="wiki-content"></div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Report Modal (and other modals) can be placed here -->

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    
    <!-- App Logic (Load these last, with defer to ensure DOM is ready) -->
    <script src="firebase-config.js" defer></script>
    <script src="auth.js" defer></script>
    <script src="aetherpedia.js" defer></script>
    <script src="app.js" defer></script>

</body>
</html>
